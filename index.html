<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button onclick="create()">Создать пользователя</button>
    <button onclick="getAll()">Получить пользователей</button>
    <button onclick="deleteByGid()">Удалить пользователя</button>
    <button onclick="getByGid()">Получить по id</button>
    <button onclick="goToPayment()">Оплатить</button>
    <link
      href="https://api.cryptocloud.plus/static/pay_btn/css/app.css"
      rel="stylesheet"
    />
    <vue-widget
      shop_id="lacOwnNUTPrGDntt"
      api_key="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1dWlkIjoiTXprMk5qWT0iLCJ0eXBlIjoicHJvamVjdCIsInYiOiJlODFhODg4MjhkMzE4N2I1YTZkZjJhY2YzNjdjNDUzMzk4MjA3M2IwODVjNjQxZWNmZTc5YmIyNzdjYTk3ODJlIiwiZXhwIjo4ODEzODQwNDUyOH0.Gmp2pwHT_TVU_s49Qrw3vhuu6K8PADF49M75shQiq4g"
      background="#fff"
      color="#000"
      border_color="#000"
      logo="color"
      width="350px"
      currency="USDT"
      amount="1"
      text_btn="Pay with CryptoCloud"
      order_id="123w3"
    ></vue-widget>
    <script src="https://api.cryptocloud.plus/static/pay_btn/js/app.js"></script>
  </body>
</html>

<script>
  function create() {
    let date = new Date();
    date = date.toISOString();
    // date = date.slice(0, 10);
    const user = {
      gid: Math.random(),
      gmail: "test@gmail.com",
      payment_type: "ukassa",
      payment_date: date,
      active: true,
      subscription_end_date: null,
    };

    fetch("http://127.0.0.1:3000/users", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(user),
    })
      .then((res) => res.json())
      .then((data) => console.log(data))
      .catch((err) => console.log(err));
  }

  function getById() {}

  function deleteById() {}

  function getAll() {
    fetch("http://127.0.0.1:3000/users", {
      method: "GET",
      headers: { "Content-Type": "application/json" },
    })
      .then((res) => res.json())
      .then((data) => console.log(data))
      .catch((err) => console.log(err));
  }

  function goToPayment() {
    window.location.href = "/payment.html";
  }
</script>
